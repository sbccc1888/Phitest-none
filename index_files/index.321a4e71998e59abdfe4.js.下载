(()=>{"use strict";window.addEventListener("DOMContentLoaded",(()=>{fetch("https://api.github.com/repos/HanHan233/PhiCommunity/commits").then((e=>e.json())).then((e=>{const t=document.querySelector("div#changelogContainer");e.forEach((e=>{const o=document.createElement("a");o.classList.add("item"),o.href=e.html_url,o.setAttribute("data-sha",e.sha.slice(0,7)),o.innerText=e.commit.message,t.appendChild(o)}))}));const e=document.querySelector("#installPWA");e.style.display="none",window.addEventListener("beforeinstallprompt",(t=>{t.preventDefault(),e.style.display="unset",e.addEventListener("click",(()=>{t.prompt(),t.userChoice.then((e=>{"accepted"===e.outcome?console.log("准备添加到主屏幕"):console.log("用户拒绝了添加到主屏幕")}))}))})),document.querySelector("button#go").addEventListener("click",(()=>{location.href="./tapToStart/index.html"})),document.querySelector("button#gotoCFPages").addEventListener("click",(()=>{location.href="https://cf.phicommunity.com.cn"})),document.querySelector("button#gotoVercel").addEventListener("click",(()=>{location.href="https://vercel.phicommunity.com.cn"})),document.querySelector("button#gotoGHPages").addEventListener("click",(()=>{location.href="https://phicommunity.com.cn"})),location.href.match("cf")?document.querySelector("button#gotoCFPages").style.display="none":location.href.match("vercel")?document.querySelector("button#gotoVercel").style.display="none":document.querySelector("button#gotoGHPages").style.display="none",document.querySelector("button#ghRepo").addEventListener("click",(()=>{window.open("https://github.com/HanHan233/PhiCommunity")})),document.querySelector("button#deviceReq").addEventListener("click",(()=>{document.querySelector("div#devRequirementPopupoverlay").classList.add("show")})),document.querySelector("div#devRequirementPopupoverlay").addEventListener("click",(e=>{e.target!=document.querySelector("#devReq")&&document.querySelector("div#devRequirementPopupoverlay").classList.remove("show")})),document.querySelector("button#changeLog").addEventListener("click",(()=>{document.querySelector("div#changeLogContainerPopupOverlay").classList.add("show")})),document.querySelector("div#changeLogContainerPopupOverlay").addEventListener("click",(e=>{e.target!=document.querySelector("#changelogContainer")&&document.querySelector("div#changeLogContainerPopupOverlay").classList.remove("show")})),document.querySelector("button#ContactUs").addEventListener("click",(()=>{document.querySelector("div#ContactUsPopupOverlay").classList.add("show")})),document.querySelector("div#ContactUsPopupOverlay").addEventListener("click",(e=>{e.target!=document.querySelector("#ContactUs")&&document.querySelector("div#ContactUsPopupOverlay").classList.remove("show")}))})),"serviceWorker"in navigator&&window.addEventListener("load",(()=>{navigator.serviceWorker.register("/service-worker.js").then((e=>{console.log("SW registered: ",e)})).catch((e=>{console.log("SW registration failed: ",e)}))}))})();